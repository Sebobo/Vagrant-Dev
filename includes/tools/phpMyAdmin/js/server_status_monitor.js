var runtime={},server_time_diff,server_os,is_superuser,server_db_isLocal;AJAX.registerOnload("server_status_monitor.js",function(){var a=$("#js_data");server_time_diff=new Date().getTime()-a.find("input[name=server_time]").val();server_os=a.find("input[name=server_os]").val();is_superuser=a.find("input[name=is_superuser]").val();server_db_isLocal=a.find("input[name=server_db_isLocal]").val()});AJAX.registerTeardown("server_status_monitor.js",function(){$("#emptyDialog").remove();$("#addChartDialog").remove();$("a.popupLink").unbind("click");$("body").unbind("click")});AJAX.registerOnload("server_status_monitor.js",function(){$("<div />").attr("id","emptyDialog").appendTo("#page_content");$("#addChartDialog").appendTo("#page_content");$("a.popupLink").click(function(){var a=$(this);$("div."+a.attr("href").substr(1)).show().offset({top:a.offset().top+a.height()+5,left:a.offset().left}).addClass("openedPopup");return false});$("body").click(function(a){$("div.openedPopup").each(function(){var b=$(this);var c=b.offset();if(a.pageX<c.left||a.pageY<c.top||a.pageX>c.left+b.outerWidth()||a.pageY>c.top+b.outerHeight()){b.hide().removeClass("openedPopup")}})})});AJAX.registerTeardown("server_status_monitor.js",function(){$('a[href="#rearrangeCharts"], a[href="#endChartEditMode"]').unbind("click");$('div.popupContent select[name="chartColumns"]').unbind("change");$('div.popupContent select[name="gridChartRefresh"]').unbind("change");$('a[href="#addNewChart"]').unbind("click");$('a[href="#exportMonitorConfig"]').unbind("click");$('a[href="#importMonitorConfig"]').unbind("click");$('a[href="#clearMonitorConfig"]').unbind("click");$('a[href="#pauseCharts"]').unbind("click");$('a[href="#monitorInstructionsDialog"]').unbind("click");$('input[name="chartType"]').unbind("click");$('input[name="useDivisor"]').unbind("click");$('input[name="useUnit"]').unbind("click");$('select[name="varChartList"]').unbind("click");$('a[href="#kibDivisor"]').unbind("click");$('a[href="#mibDivisor"]').unbind("click");$('a[href="#submitClearSeries"]').unbind("click");$('a[href="#submitAddSeries"]').unbind("click");$("#chartPreset").unbind("click");$("#chartStatusVar").unbind("click");destroyGrid()});AJAX.registerOnload("server_status_monitor.js",function(){$("div.tabLinks").show();$("#loadingMonitorIcon").remove();if(!codemirror_editor){var u=$("#sqlquery");if(u.length>0&&typeof CodeMirror!="undefined"){codemirror_editor=CodeMirror.fromTextArea(u[0],{lineNumbers:true,matchBrackets:true,indentUnit:4,mode:"text/x-mysql"})}}$("#logAnalyseDialog .datetimefield").each(function(){PMA_addDatepicker($(this))});var p=null;var J=null;var n;var k="1.0";runtime={charts:null,refreshTimeout:null,refreshRequest:null,chartAI:0,redrawCharts:false,dataList:[],gridMaxPoints:20,xmin:-1,xmax:-1};var a=null;var I={columns:3,chartSize:{width:295,height:250},gridMaxPoints:"auto",gridRefresh:5000};var s=false;var H={qce:{title:PMA_messages.strQueryCacheEfficiency,series:[{label:PMA_messages.strQueryCacheEfficiency}],nodes:[{dataPoints:[{type:"statusvar",name:"Qcache_hits"},{type:"statusvar",name:"Com_select"}],transformFn:"qce"}],maxYLabel:0},qcu:{title:PMA_messages.strQueryCacheUsage,series:[{label:PMA_messages.strQueryCacheUsed}],nodes:[{dataPoints:[{type:"statusvar",name:"Qcache_free_memory"},{type:"servervar",name:"query_cache_size"}],transformFn:"qcu"}],maxYLabel:0}};var F=[];var d,c,C,A;var i=false;var j;switch(server_os){case"WINNT":$.extend(H,{cpu:{title:PMA_messages.strSystemCPUUsage,series:[{label:PMA_messages.strAverageLoad}],nodes:[{dataPoints:[{type:"cpu",name:"loadavg"}]}],maxYLabel:100},memory:{title:PMA_messages.strSystemMemory,series:[{label:PMA_messages.strTotalMemory,fill:true},{dataType:"memory",label:PMA_messages.strUsedMemory,fill:true}],nodes:[{dataPoints:[{type:"memory",name:"MemTotal"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"MemUsed"}],valueDivisor:1024}],maxYLabel:0},swap:{title:PMA_messages.strSystemSwap,series:[{label:PMA_messages.strTotalSwap,fill:true},{label:PMA_messages.strUsedSwap,fill:true}],nodes:[{dataPoints:[{type:"memory",name:"SwapTotal"}]},{dataPoints:[{type:"memory",name:"SwapUsed"}]}],maxYLabel:0}});break;case"Linux":$.extend(H,{cpu:{title:PMA_messages.strSystemCPUUsage,series:[{label:PMA_messages.strAverageLoad}],nodes:[{dataPoints:[{type:"cpu",name:"irrelevant"}],transformFn:"cpu-linux"}],maxYLabel:0},memory:{title:PMA_messages.strSystemMemory,series:[{label:PMA_messages.strBufferedMemory,fill:true},{label:PMA_messages.strUsedMemory,fill:true},{label:PMA_messages.strCachedMemory,fill:true},{label:PMA_messages.strFreeMemory,fill:true}],nodes:[{dataPoints:[{type:"memory",name:"Buffers"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"MemUsed"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"Cached"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"MemFree"}],valueDivisor:1024}],maxYLabel:0},swap:{title:PMA_messages.strSystemSwap,series:[{label:PMA_messages.strCachedSwap,fill:true},{label:PMA_messages.strUsedSwap,fill:true},{label:PMA_messages.strFreeSwap,fill:true}],nodes:[{dataPoints:[{type:"memory",name:"SwapCached"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"SwapUsed"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"SwapFree"}],valueDivisor:1024}],maxYLabel:0}});break;case"SunOS":$.extend(H,{cpu:{title:PMA_messages.strSystemCPUUsage,series:[{label:PMA_messages.strAverageLoad}],nodes:[{dataPoints:[{type:"cpu",name:"loadavg"}]}],maxYLabel:0},memory:{title:PMA_messages.strSystemMemory,series:[{label:PMA_messages.strUsedMemory,fill:true},{label:PMA_messages.strFreeMemory,fill:true}],nodes:[{dataPoints:[{type:"memory",name:"MemUsed"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"MemFree"}],valueDivisor:1024}],maxYLabel:0},swap:{title:PMA_messages.strSystemSwap,series:[{label:PMA_messages.strUsedSwap,fill:true},{label:PMA_messages.strFreeSwap,fill:true}],nodes:[{dataPoints:[{type:"memory",name:"SwapUsed"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"SwapFree"}],valueDivisor:1024}],maxYLabel:0}});break}var h={c0:{title:PMA_messages.strQuestions,series:[{label:PMA_messages.strQuestions}],nodes:[{dataPoints:[{type:"statusvar",name:"Questions"}],display:"differential"}],maxYLabel:0},c1:{title:PMA_messages.strChartConnectionsTitle,series:[{label:PMA_messages.strConnections},{label:PMA_messages.strProcesses}],nodes:[{dataPoints:[{type:"statusvar",name:"Connections"}],display:"differential"},{dataPoints:[{type:"proc",name:"processes"}]}],maxYLabel:0},c2:{title:PMA_messages.strTraffic,series:[{label:PMA_messages.strBytesSent},{label:PMA_messages.strBytesReceived}],nodes:[{dataPoints:[{type:"statusvar",name:"Bytes_sent"}],display:"differential",valueDivisor:1024},{dataPoints:[{type:"statusvar",name:"Bytes_received"}],display:"differential",valueDivisor:1024}],maxYLabel:0}};if(server_db_isLocal){h.c3=H.cpu;h.c4=H.memory;h.c5=H.swap}var x={cogButton:{symbol:"url("+pmaThemeImage+"s_cog.png)",x:-36,symbolFill:"#B5C9DF",hoverSymbolFill:"#779ABF",_titleKey:"settings",menuName:"gridsettings",menuItems:[{textKey:"editChart",onclick:function(){v(this)}},{textKey:"removeChart",onclick:function(){K(this)}}]}};$('a[href="#rearrangeCharts"], a[href="#endChartEditMode"]').click(function(L){L.preventDefault();s=!s;if($(this).attr("href")=="#endChartEditMode"){s=false}$("#chartGrid div svg").find("*[zIndex=20], *[zIndex=21], *[zIndex=19]").toggle(s);$('a[href="#endChartEditMode"]').toggle(s);if(s){$("div.popupContent").hide().removeClass("openedPopup");$("#chartGrid").sortableTable({ignoreRect:{top:8,left:t().width-63,width:54,height:24},events:{drop:function(R,O,W){var X,M,U;var N=$(R).children().first().attr("id");if($(O).children().length>0){U=$(O).children().first().attr("id")}$.each(runtime.charts,function(aa,ab){if(ab.chart.options.chart.renderTo==N){X=aa}if(U&&ab.chart.options.chart.renderTo==U){M=aa}});if(M){if(X){dragChart=runtime.charts[X];runtime.charts[X]=runtime.charts[M];runtime.charts[M]=dragChart}else{var Z=[];var Q=parseInt(M.substr(1));var T=W.col+W.row*a.columns;var Y=[];var S={};var V=0;$.each(runtime.charts,function(aa,ab){if(aa!=M){Z.push(aa)}});Z.sort();for(var P=0;P<Z.length;P++){if(Z[P]==T){S["c"+(V++)]=runtime.charts[M];T=-1}S["c"+(V++)]=runtime.charts[Z[P]]}if(T!=-1){S["c"+(V++)]=runtime.charts[M]}runtime.charts=S}e()}}}})}else{$("#chartGrid").sortableTable("destroy");e()}return false});$('div.popupContent select[name="chartColumns"]').change(function(){a.columns=parseInt(this.value);var L=t();$("#chartGrid tr td").css("width",L.width+"px");var O;var P=$("#chartGrid tr:first");var Q=0;while(P.length!=0){O=1;P.find("td").each(function(){if(O>a.columns){if(P.next().length==0){P.after("<tr></tr>")}P.next().prepend($(this))}O++});if(P.next().length>0){var N=a.columns-P.find("td").length;for(var M=0;M<N;M++){P.append(P.next().find("td:first"));P.nextAll().each(function(){if($(this).next().length!=0){$(this).append($(this).next().find("td:first"))}})}}P=P.next();Q++}$.each(runtime.charts,function(R,S){S.chart.setSize(L.width,L.height,false)});if(a.gridMaxPoints=="auto"){runtime.gridMaxPoints=Math.round((L.width-40)/12)}runtime.xmin=new Date().getTime()-server_time_diff-runtime.gridMaxPoints*a.gridRefresh;runtime.xmax=new Date().getTime()-server_time_diff+a.gridRefresh;if(s){$("#chartGrid").sortableTable("refresh")}e()});$('div.popupContent select[name="gridChartRefresh"]').change(function(){a.gridRefresh=parseInt(this.value)*1000;clearTimeout(runtime.refreshTimeout);if(runtime.refreshRequest){runtime.refreshRequest.abort()}runtime.xmin=new Date().getTime()-server_time_diff-runtime.gridMaxPoints*a.gridRefresh;runtime.refreshTimeout=setTimeout(m,a.gridRefresh);e()});$('a[href="#addNewChart"]').click(function(M){M.preventDefault();var L={};L[PMA_messages.strAddChart]=function(){var O=$('input[name="chartType"]:checked').val();if(O=="preset"){J=H[$('#addChartDialog select[name="presetCharts"]').prop("value")]}else{if(!J||!J.nodes||J.nodes.length==0){alert(PMA_messages.strAddOneSeriesWarning);return}}J.title=$('input[name="chartTitle"]').val();f($.extend(true,{},J));J=null;e();$(this).dialog("close")};L[PMA_messages.strClose]=function(){J=null;$("span#clearSeriesLink").hide();$("#seriesPreview").html("");$(this).dialog("close")};var N=$('#addChartDialog select[name="presetCharts"]');if(N.html().length==0){$.each(H,function(O,P){N.append('<option value="'+O+'">'+P.title+"</option>")});N.change(function(){$('input[name="chartTitle"]').val(N.find(":selected").text());$("#chartPreset").prop("checked",true)});$("#chartPreset").click(function(){$('input[name="chartTitle"]').val(N.find(":selected").text())});$("#chartStatusVar").click(function(){$('input[name="chartTitle"]').val($("#chartSeries").find(":selected").text().replace(/_/g," "))});$("#chartSeries").change(function(){$('input[name="chartTitle"]').val($("#chartSeries").find(":selected").text().replace(/_/g," "))})}$("#addChartDialog").dialog({width:"auto",height:"auto",buttons:L});$("#addChartDialog #seriesPreview").html("<i>"+PMA_messages.strNone+"</i>");return false});$('a[href="#exportMonitorConfig"]').click(function(M){M.preventDefault();var N={};$.each(runtime.charts,function(O,P){N[O]={};N[O].nodes=P.nodes;N[O].settings=P.settings;N[O].title=P.title});var L={monitorCharts:N,monitorSettings:a};$("<form />",{"class":"disableAjax",method:"post",action:"file_echo.php?"+PMA_commonParams.get("common_query")+"&filename=1",style:"display:none;"}).append($("<input />",{type:"hidden",name:"monitorconfig",value:$.toJSON(L)})).appendTo("body").submit().remove()});$('a[href="#importMonitorConfig"]').click(function(M){M.preventDefault();$("#emptyDialog").dialog({title:PMA_messages.strImportDialogTitle});$("#emptyDialog").html(PMA_messages.strImportDialogMessage+':<br/><form action="file_echo.php?'+PMA_commonParams.get("common_query")+'&import=1" method="post" enctype="multipart/form-data"><input type="file" name="file"> <input type="hidden" name="import" value="1"> </form>');var L={};L[PMA_messages.strImport]=function(){var O,N;$("body").append(O=$('<iframe id="monitorConfigUpload" style="display:none;"></iframe>'));var P=O[0].contentWindow.document;P.open();P.close();mew=P;O.load(function(){var Q;try{var S=$("body",$("iframe#monitorConfigUpload")[0].contentWindow.document).html();Q=$.secureEvalJSON(S.substring(S.indexOf("{"),S.lastIndexOf("}")+1))}catch(R){alert(PMA_messages.strFailedParsingConfig);$("#emptyDialog").dialog("close");return}if(!Q||!Q.monitorCharts||!Q.monitorCharts){alert(PMA_messages.strFailedParsingConfig);$("#emptyDialog").dialog("close");return}try{window.localStorage.monitorCharts=$.toJSON(Q.monitorCharts);window.localStorage.monitorSettings=$.toJSON(Q.monitorSettings);D()}catch(R){alert(PMA_messages.strFailedBuildingGrid);window.localStorage.removeItem("monitorCharts");window.localStorage.removeItem("monitorSettings");D()}$("#emptyDialog").dialog("close")});$("body",P).append(N=$("#emptyDialog").find("form"));N.submit();$("#emptyDialog").append('<img class="ajaxIcon" src="'+pmaThemeImage+'ajax_clock_small.gif" alt="">')};L[PMA_messages.strCancel]=function(){$(this).dialog("close")};$("#emptyDialog").dialog({width:"auto",height:"auto",buttons:L})});$('a[href="#clearMonitorConfig"]').click(function(L){L.preventDefault();window.localStorage.removeItem("monitorCharts");window.localStorage.removeItem("monitorSettings");window.localStorage.removeItem("monitorVersion");$(this).hide();D()});$('a[href="#pauseCharts"]').click(function(L){L.preventDefault();runtime.redrawCharts=!runtime.redrawCharts;if(!runtime.redrawCharts){$(this).html(PMA_getImage("play.png")+" "+PMA_messages.strResumeMonitor)}else{$(this).html(PMA_getImage("pause.png")+" "+PMA_messages.strPauseMonitor);if(!runtime.charts){r();$('a[href="#settingsPopup"]').show()}}return false});$('a[href="#monitorInstructionsDialog"]').click(function(L){L.preventDefault();var N=$("#monitorInstructionsDialog");N.dialog({width:595,height:"auto"}).find("img.ajaxIcon").show();var M=function(O){var P={ajax_request:true,logging_vars:true};if(O){$.extend(P,O)}$.get("server_status_monitor.php?"+PMA_commonParams.get("common_query"),P,function(S){var R;if(S.success==true){R=S.message}else{return serverResponseError()}var Q=PMA_getImage("s_success.png"),U="",T="";if(R.general_log=="ON"){if(R.slow_query_log=="ON"){U=PMA_messages.strBothLogOn}else{U=PMA_messages.strGenLogOn}}if(U.length==0&&R.slow_query_log=="ON"){U=PMA_messages.strSlowLogOn}if(U.length==0){Q=PMA_getImage("s_error.png");U=PMA_messages.strBothLogOff}T="<b>"+PMA_messages.strCurrentSettings+'</b><br/><div class="smallIndent">';T+=Q+U+"<br />";if(R.log_output!="TABLE"){T+=PMA_getImage("s_error.png")+" "+PMA_messages.strLogOutNotTable+"<br />"}else{T+=PMA_getImage("s_success.png")+" "+PMA_messages.strLogOutIsTable+"<br />"}if(R.slow_query_log=="ON"){if(R.long_query_time>2){T+=PMA_getImage("s_attention.png")+" "+$.sprintf(PMA_messages.strSmallerLongQueryTimeAdvice,R.long_query_time)+"<br />"}if(R.long_query_time<2){T+=PMA_getImage("s_success.png")+" "+$.sprintf(PMA_messages.strLongQueryTimeSet,R.long_query_time)+"<br />"}}T+="</div>";if(is_superuser){T+="<p></p><b>"+PMA_messages.strChangeSettings+"</b>";T+='<div class="smallIndent">';T+=PMA_messages.strSettingsAppliedGlobal+"<br/>";var V="TABLE";if(R.log_output=="TABLE"){V="FILE"}T+='- <a class="set" href="#log_output-'+V+'">'+$.sprintf(PMA_messages.strSetLogOutput,V)+" </a><br />";if(R.general_log!="ON"){T+='- <a class="set" href="#general_log-ON">'+$.sprintf(PMA_messages.strEnableVar,"general_log")+" </a><br />"}else{T+='- <a class="set" href="#general_log-OFF">'+$.sprintf(PMA_messages.strDisableVar,"general_log")+" </a><br />"}if(R.slow_query_log!="ON"){T+='- <a class="set" href="#slow_query_log-ON">'+$.sprintf(PMA_messages.strEnableVar,"slow_query_log")+" </a><br />"}else{T+='- <a class="set" href="#slow_query_log-OFF">'+$.sprintf(PMA_messages.strDisableVar,"slow_query_log")+" </a><br />"}V=5;if(R.long_query_time>2){V=1}T+='- <a class="set" href="#long_query_time-'+V+'">'+$.sprintf(PMA_messages.setSetLongQueryTime,V)+" </a><br />"}else{T+=PMA_messages.strNoSuperUser+"<br/>"}T+="</div>";N.find("div.monitorUse").toggle(R.log_output=="TABLE"&&(R.slow_query_log=="ON"||R.general_log=="ON"));N.find("div.ajaxContent").html(T);N.find("img.ajaxIcon").hide();N.find("a.set").click(function(){var W=$(this).attr("href").split("-");M({varName:W[0].substr(1),varValue:W[1]});N.find("img.ajaxIcon").show()})})};M();return false});$('input[name="chartType"]').change(function(){$("#chartVariableSettings").toggle(this.checked&&this.value=="variable");var L=$('input[name="chartTitle"]').val();if(L==PMA_messages.strChartTitle||L==$('label[for="'+$('input[name="chartTitle"]').data("lastRadio")+'"]').text()){$('input[name="chartTitle"]').data("lastRadio",$(this).attr("id")).val($('label[for="'+$(this).attr("id")+'"]').text())}});$('input[name="useDivisor"]').change(function(){$("span.divisorInput").toggle(this.checked)});$('input[name="useUnit"]').change(function(){$("span.unitInput").toggle(this.checked)});$('select[name="varChartList"]').change(function(){if(this.selectedIndex!=0){$("#variableInput").val(this.value)}});$('a[href="#kibDivisor"]').click(function(L){L.preventDefault();$('input[name="valueDivisor"]').val(1024);$('input[name="valueUnit"]').val(PMA_messages.strKiB);$("span.unitInput").toggle(true);$('input[name="useUnit"]').prop("checked",true);return false});$('a[href="#mibDivisor"]').click(function(L){L.preventDefault();$('input[name="valueDivisor"]').val(1024*1024);$('input[name="valueUnit"]').val(PMA_messages.strMiB);$("span.unitInput").toggle(true);$('input[name="useUnit"]').prop("checked",true);return false});$('a[href="#submitClearSeries"]').click(function(L){L.preventDefault();$("#seriesPreview").html("<i>"+PMA_messages.strNone+"</i>");J=null;$("#clearSeriesLink").hide()});$('a[href="#submitAddSeries"]').click(function(N){N.preventDefault();if($("#variableInput").val()==""){return false}if(J==null){$("#seriesPreview").html("");J={title:$('input[name="chartTitle"]').val(),nodes:[],series:[],maxYLabel:0}}var M={dataPoints:[{type:"statusvar",name:$("#variableInput").val()}],display:$('input[name="differentialValue"]').prop("checked")?"differential":""};if(M.dataPoints[0].name=="Processes"){M.dataPoints[0].type="proc"}if($('input[name="useDivisor"]').prop("checked")){M.valueDivisor=parseInt($('input[name="valueDivisor"]').val())}if($('input[name="useUnit"]').prop("checked")){M.unit=$('input[name="valueUnit"]').val()}var O=M.display=="differential"?", "+PMA_messages.strDifferential:"";O+=M.valueDivisor?(", "+$.sprintf(PMA_messages.strDividedBy,M.valueDivisor)):"";O+=M.unit?(", "+PMA_messages.strUnit+": "+M.unit):"";var L={label:$("#variableInput").val().replace(/_/g," ")};J.series.push(L);$("#seriesPreview").append("- "+L.label+O+"<br/>");J.nodes.push(M);$("#variableInput").val("");$('input[name="differentialValue"]').prop("checked",true);$('input[name="useDivisor"]').prop("checked",false);$('input[name="useUnit"]').prop("checked",false);$('input[name="useDivisor"]').trigger("change");$('input[name="useUnit"]').trigger("change");$('select[name="varChartList"]').get(0).selectedIndex=0;$("#clearSeriesLink").show();return false});$("#variableInput").autocomplete({source:variableNames});function r(){if(window.localStorage){if(window.localStorage.monitorCharts){runtime.charts=$.parseJSON(window.localStorage.monitorCharts)}if(window.localStorage.monitorSettings){a=$.parseJSON(window.localStorage.monitorSettings)}$('a[href="#clearMonitorConfig"]').toggle(runtime.charts!=null);if(runtime.charts!=null&&k!=window.localStorage.monitorVersion){$("#emptyDialog").dialog({title:PMA_messages.strIncompatibleMonitorConfig});$("#emptyDialog").html(PMA_messages.strIncompatibleMonitorConfigDescription);var N={};N[PMA_messages.strClose]=function(){$(this).dialog("close")};$("#emptyDialog").dialog({width:400,buttons:N})}}if(runtime.charts==null){runtime.charts=h}if(a==null){a=I}$('select[name="gridChartRefresh"]').val(a.gridRefresh/1000);$('select[name="chartColumns"]').val(a.columns);if(a.gridMaxPoints=="auto"){runtime.gridMaxPoints=Math.round((a.chartSize.width-40)/12)}else{runtime.gridMaxPoints=a.gridMaxPoints}runtime.xmin=new Date().getTime()-server_time_diff-runtime.gridMaxPoints*a.gridRefresh;runtime.xmax=new Date().getTime()-server_time_diff+a.gridRefresh;$("#chartGrid").html("<tr><td></td><td></td></tr><tr><td></td><td></td></tr>");n={width:$("#chartGrid td:nth-child(2)").offset().left-$("#chartGrid td:nth-child(1)").offset().left,height:$("#chartGrid tr:nth-child(2) td:nth-child(2)").offset().top-$("#chartGrid tr:nth-child(1) td:nth-child(1)").offset().top};$("#chartGrid").html("");var P=[];$.each(runtime.charts,function(Q,R){P.push(Q)});P.sort();for(var M=0;M<P.length;M++){f(runtime.charts[P[M]],true)}var O=$("#chartGrid .monitorChart").length;var L=(a.columns-O%a.columns)%a.columns;for(var M=0;M<L;M++){$("#chartGrid tr:last").append("<td></td>")}$("#chartGrid tr td").css("width",t().width+"px");y();m()}function D(){var L=null;if(runtime.charts){L={};$.each(runtime.charts,function(P,Q){for(var O=0,M=Q.nodes.length;O<M;O++){L[Q.nodes[O].dataPoint]=[];for(var N=0,R=Q.chart.series[O].data.length;N<R;N++){L[Q.nodes[O].dataPoint].push([Q.chart.series[O].data[N].x,Q.chart.series[O].data[N].y])}}})}destroyGrid();r();if(L){$.each(runtime.charts,function(O,P){for(var N=0,M=P.nodes.length;N<M;N++){if(L[P.nodes[N].dataPoint]){P.chart.series[N].setData(L[P.nodes[N].dataPoint])}}})}}function t(){var L=$("#logTable").innerWidth()/a.columns-(a.columns-1)*n.width;return{width:L,height:0.75*L}}function f(Q,L){var O={title:escapeHtml(Q.title),grid:{drawBorder:false,shadow:false,background:"rgba(0,0,0,0)"},axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer,tickOptions:{formatString:"%H:%M:%S",showGridline:false},min:runtime.xmin,max:runtime.xmax},yaxis:{min:0,max:100,tickInterval:20}},seriesDefaults:{rendererOptions:{smooth:true},showLine:true,lineWidth:2},highlighter:{show:true,showTooltip:true,tooltipAxes:"y",useAxesFormatters:true}};if(O.title===PMA_messages.strSystemCPUUsage||O.title===PMA_messages.strQueryCacheEfficiency){O.axes.yaxis.tickOptions={formatString:"%d %%"}}else{if(O.title===PMA_messages.strSystemMemory||O.title===PMA_messages.strSystemSwap){O.stackSeries=true;O.axes.yaxis.tickOptions={formatter:$.jqplot.byteFormatter(2)}}else{if(O.title===PMA_messages.strTraffic){O.axes.yaxis.tickOptions={formatter:$.jqplot.byteFormatter(1)}}}}O.series=Q.series;if($("#gridchart"+runtime.chartAI).length==0){var P=$("#chartGrid .monitorChart").length;if(P==0||!(P%a.columns)){$("#chartGrid").append("<tr></tr>")}$("#chartGrid tr:last").append('<td><div class="ui-state-default monitorChart" id="gridchart'+runtime.chartAI+'"></div></td>')}var N=[];for(M in Q.series){N.push([[0,0]])}Q.chart=$.jqplot("gridchart"+runtime.chartAI,N,O);for(M in Q.chart.series){Q.chart.series[M].data.shift()}var R=$("<div />").css("padding","0.5em");for(var M in Q.chart.series){R.append($("<div />").append($("<div>").css({width:"1em",height:"1em",background:Q.chart.seriesColors[M]}).addClass("floatleft")).append($("<div>").text(Q.chart.series[M].label).addClass("floatleft")).append($('<div class="clearfloat">')).addClass("floatleft"))}$("#gridchart"+runtime.chartAI).css("overflow","hidden").parent().append(R);if(L!=true){runtime.charts["c"+runtime.chartAI]=Q;y()}$("#gridchart"+runtime.chartAI).bind("jqplotMouseDown",function(T,S,W,V,U){i=true;F.push(W.xaxis);if($("#selection_box").length){$("#selection_box").remove()}selectionBox=$('<div id="selection_box" style="z-index:1000;height:250px;position:absolute;background-color:#87CEEB;opacity:0.4;filter:alpha(opacity=40);pointer-events:none;">');$(document.body).append(selectionBox);d=T.pageX;c=T.pageY;selectionBox.attr({id:"selection_box"}).css({top:c-S.y,left:d}).fadeIn()});$("#gridchart"+runtime.chartAI).bind("jqplotMouseUp",function(V,T,Y,X,W){if(!i){return}F.push(Y.xaxis);if(F[1]<F[0]){F=[];return}var U=new Date(Math.ceil(F[0]));var S=new Date(Math.ceil(F[1]));w(U,S);F=[];i=false});$("#gridchart"+runtime.chartAI).bind("jqplotMouseMove",function(T,S,W,V,U){if(!i){return}if(d!=undefined){$("#selection_box").css({width:Math.ceil(T.pageX-d)}).fadeIn()}});$("#gridchart"+runtime.chartAI).bind("jqplotMouseLeave",function(T,S,W,V,U){i=false});$(document.body).mouseup(function(){if($("#selection_box").length){selectionBox.remove()}});$("#chartGrid div svg").find("*[zIndex=20], *[zIndex=21], *[zIndex=19]").toggle(s);runtime.chartAI++}function v(O){var Q=O.options.chart.renderTo;if(!Q){return}var N=null;var L=null;$.each(runtime.charts,function(R,S){if(S.chart.options.chart.renderTo==Q){N=S;L=R;return false}});if(N==null){return}var P="<p><b>"+PMA_messages.strChartTitle+': </b> <br/> <input type="text" size="35" name="chartTitle" value="'+N.title+'" />';P+="</p><p><b>"+PMA_messages.strSeries+":</b> </p><ol>";for(var M=0;M<N.nodes.length;M++){P+="<li><i>"+N.nodes[M].dataPoints[0].name+': </i><br/><input type="text" name="chartSerie-'+M+'" value="'+N.nodes[M].name+'" /></li>'}dlgBtns={};dlgBtns[PMA_messages.strSave]=function(){runtime.charts[L].title=$('#emptyDialog input[name="chartTitle"]').val();runtime.charts[L].chart.setTitle({text:runtime.charts[L].title});$('#emptyDialog input[name*="chartSerie"]').each(function(){var S=$(this);var R=S.attr("name").split("-")[1];runtime.charts[L].nodes[R].name=S.val();runtime.charts[L].chart.series[R].name=S.val()});$(this).dialog("close");e()};dlgBtns[PMA_messages.strCancel]=function(){$(this).dialog("close")};$("#emptyDialog").html(P+"</ol>");$("#emptyDialog").dialog({title:PMA_messages.strChartEdit,width:"auto",height:"auto",buttons:dlgBtns})}function w(M,L){$('#logAnalyseDialog input[name="dateStart"]').val(formatDate(M,"yyyy-MM-dd HH:mm:ss"));$('#logAnalyseDialog input[name="dateEnd"]').val(formatDate(L,"yyyy-MM-dd HH:mm:ss"));var N={};N[PMA_messages.strFromSlowLog]=function(){G("slow",M,L);$(this).dialog("close")};N[PMA_messages.strFromGeneralLog]=function(){G("general",M,L);$(this).dialog("close")};$("#logAnalyseDialog").dialog({width:"auto",height:"auto",buttons:N})}function G(O,M,L){var P=Date.parse($('#logAnalyseDialog input[name="dateStart"]').prop("value"))||M;var N=Date.parse($('#logAnalyseDialog input[name="dateEnd"]').prop("value"))||L;l({src:O,start:P,end:N,removeVariables:$("#removeVariables").prop("checked"),limitTypes:$("#limitTypes").prop("checked")})}function K(L){var M=L.options.chart.renderTo;if(!M){return}$.each(runtime.charts,function(N,O){if(O.chart.options.chart.renderTo==M){delete runtime.charts[N];return false}});y();setTimeout(function(){L.destroy();$("#"+M).remove()},10);e()}function m(){runtime.refreshRequest=$.post("server_status_monitor.php?"+PMA_commonParams.get("common_query"),{ajax_request:true,chart_data:1,type:"chartgrid",requiredData:$.toJSON(runtime.dataList)},function(P){var O;if(P.success==true){O=P.message}else{return serverResponseError()}var N,L=0;var Q;var M;$.each(runtime.charts,function(V,U){var T=U.chartID;if(!O[T]){return}M=0;for(var S=0;S<U.nodes.length;S++){if(L==0&&S==0){if(p==null){Q=O.x-runtime.xmax}else{Q=parseInt(O.x-p.x)}runtime.xmin+=Q;runtime.xmax+=Q}if(U.nodes[S].transformFn){N=o(U.nodes[S].transformFn,O[T][S],(p==null||p[T]==null?null:p[T][S]))}else{N=parseFloat(O[T][S][0].value);if(U.nodes[S].display=="differential"){if(p==null||p[T]==null){continue}N-=p[T][S][0].value}if(U.nodes[S].valueDivisor){N=N/U.nodes[S].valueDivisor}}if(N!=undefined){U.chart.series[S].data.push([O.x,N]);if(N>U.maxYLabel){U.maxYLabel=N}else{if(U.maxYLabel==0){U.maxYLabel=0.5}}if(U.chart.series[S].data.length>runtime.gridMaxPoints&&U.chart.series[S].data[0][0]<runtime.xmin){if(U.maxYLabel<=U.chart.series[S].data[0][1]){U.chart.series[S].data.splice(0,U.chart.series[S].data.length-runtime.gridMaxPoints);U.maxYLabel=B(U.chart.series[S].data)}else{U.chart.series[S].data.splice(0,U.chart.series[S].data.length-runtime.gridMaxPoints)}}if(U.title===PMA_messages.strSystemMemory||U.title===PMA_messages.strSystemSwap){M+=N}}}var R=(runtime.xmax-runtime.xmin)/5;U.chart.axes["xaxis"].ticks=[(runtime.xmax-R*4),(runtime.xmax-R*3),(runtime.xmax-R*2),(runtime.xmax-R),runtime.xmax];if(U.title!==PMA_messages.strSystemCPUUsage&&U.title!==PMA_messages.strQueryCacheEfficiency&&U.title!==PMA_messages.strSystemMemory&&U.title!==PMA_messages.strSystemSwap){U.chart.axes["yaxis"]["max"]=Math.ceil(U.maxYLabel*1.1);U.chart.axes["yaxis"]["tickInterval"]=Math.ceil(U.maxYLabel*1.1/5)}else{if(U.title===PMA_messages.strSystemMemory||U.title===PMA_messages.strSystemSwap){U.chart.axes["yaxis"]["max"]=Math.ceil(M*1.1/100)*100;U.chart.axes["yaxis"]["tickInterval"]=Math.ceil(M*1.1/5)}}L++;if(runtime.redrawCharts){U.chart.replot()}});p=O;runtime.refreshTimeout=setTimeout(m,a.gridRefresh)})}function B(L){var M=L[0][1];$.each(L,function(O,N){M=(N[1]>M)?N[1]:M});return M}function o(M,Q,O){switch(M){case"cpu-linux":if(O==null){return undefined}Q=Q[0];O=O[0];var P=Q.busy+Q.idle-(O.busy+O.idle);var N=Q.idle-O.idle;return 100*(P-N)/P;case"qce":if(O==null){return undefined}var L=Q[0].value-O[0].value;if(Q[1].value-O[1].value==0){return 0}return L/(Q[1].value-O[1].value+L)*100;case"qcu":if(Q[1].value==0){return 0}return 100-Q[0].value/Q[1].value*100}return undefined}function y(){runtime.dataList={};var L=0;$.each(runtime.charts,function(O,P){runtime.dataList[L]=[];for(var N=0,M=P.nodes.length;N<M;N++){runtime.dataList[L][N]=P.nodes[N].dataPoints}runtime.charts[O].chartID=L;L++})}function l(N){var L="";var P=null;if(!N.removeVariables){N.removeVariables=false}if(!N.limitTypes){N.limitTypes=false}$("#emptyDialog").dialog({title:PMA_messages.strAnalysingLogsTitle});$("#emptyDialog").html(PMA_messages.strAnalysingLogs+' <img class="ajaxIcon" src="'+pmaThemeImage+'ajax_clock_small.gif" alt="">');var M={};M[PMA_messages.strCancelRequest]=function(){if(P!=null){P.abort()}$(this).dialog("close")};$("#emptyDialog").dialog({width:"auto",height:"auto",buttons:M});P=$.get("server_status_monitor.php?"+PMA_commonParams.get("common_query"),{ajax_request:true,log_data:1,type:N.src,time_start:Math.round(N.start/1000),time_end:Math.round(N.end/1000),removeVariables:N.removeVariables,limitTypes:N.limitTypes},function(S){var R;if(S.success==true){R=S.message}else{return serverResponseError()}if(R.rows.length!=0){runtime.logDataCols=g(R);$("#emptyDialog").dialog({title:PMA_messages.strLoadingLogs});$("#emptyDialog").html("<p>"+PMA_messages.strLogDataLoaded+"</p>");$.each(R.sum,function(T,U){T=T.charAt(0).toUpperCase()+T.slice(1).toLowerCase();if(T=="Total"){T="<b>"+T+"</b>"}$("#emptyDialog").append(T+": "+U+"<br/>")});if(R.numRows>12){$("#logTable").prepend('<fieldset id="logDataFilter">    <legend>'+PMA_messages.strFiltersForLogTable+'</legend>    <div class="formelement">        <label for="filterQueryText">'+PMA_messages.strFilterByWordRegexp+'</label>        <input name="filterQueryText" type="text" id="filterQueryText" style="vertical-align: baseline;" />    </div>'+((R.numRows>250)?' <div class="formelement"><button name="startFilterQueryText" id="startFilterQueryText">'+PMA_messages.strFilter+"</button></div>":"")+'    <div class="formelement">       <input type="checkbox" id="noWHEREData" name="noWHEREData" value="1" />        <label for="noWHEREData"> '+PMA_messages.strIgnoreWhereAndGroup+"</label>   </div</fieldset>");$("#logTable #noWHEREData").change(function(){O(true)});if(R.numRows>250){$("#logTable #startFilterQueryText").click(O)}else{$("#logTable #filterQueryText").keyup(O)}}var Q={};Q[PMA_messages.strJumpToTable]=function(){$(this).dialog("close");$(document).scrollTop($("#logTable").offset().top)};$("#emptyDialog").dialog("option","buttons",Q)}else{$("#emptyDialog").dialog({title:PMA_messages.strNoDataFoundTitle});$("#emptyDialog").html("<p>"+PMA_messages.strNoDataFound+"</p>");var Q={};Q[PMA_messages.strClose]=function(){$(this).dialog("close")};$("#emptyDialog").dialog("option","buttons",Q)}});function O(R){var T=false,Q,aj;var an=$("#logTable #filterQueryText").val();if(an.length==0){aj=null}else{aj=new RegExp(an,"i")}var ae=0,W=0,ah=0,ac;var ai=$("#logTable #noWHEREData").prop("checked");var al=/([^=]+)=(\d+|((\'|"|).*?[^\\])\4((\s+)|$))/gi;var ad=/([a-z0-9_]+)\(.+?\)/gi;var U={},af={};var aa=false,X;var ab=runtime.logDataCols[runtime.logDataCols.length-2];var am=runtime.logDataCols[runtime.logDataCols.length-1];var S=N.src=="slow";var ag={};var ak=function(ap,aq){var ao=aq.match(/<td>(.*?)<\/td>/gi);if(!ag[ap]){ag[ap]=[0,0,0,0]}ag[ap][0]+=b(ao[2].replace(/(<td>|<\/td>)/gi,""));ag[ap][1]+=b(ao[3].replace(/(<td>|<\/td>)/gi,""));ag[ap][2]+=parseInt(ao[4].replace(/(<td>|<\/td>)/gi,""));ag[ap][3]+=parseInt(ao[5].replace(/(<td>|<\/td>)/gi,""))};$("#logTable table tbody tr td:nth-child("+(runtime.logDataCols.length-1)+")").each(function(){var ao=$(this);if(R&&ao.html().match(/^SELECT/i)){if(ai){ac=ao.text().replace(al,"$1=...$6").trim();ac=ac.replace(ad," $1(...)");if(U[ac]){U[ac]+=parseInt(ao.next().text());W+=parseInt(ao.next().text());aa=true}else{U[ac]=parseInt(ao.next().text());af[ac]=ah;ao.text(ac)}if(S){ak(ac,ao.parent().html())}}else{X=ao.parent().data("query");ao.text(X[ab]);ao.next().text(X[am]);if(S){ao.parent().children("td:nth-child(3)").text(X.query_time);ao.parent().children("td:nth-child(4)").text(X.lock_time);ao.parent().children("td:nth-child(5)").text(X.rows_sent);ao.parent().children("td:nth-child(6)").text(X.rows_examined)}}}if(!aa&&(aj!=null&&!aj.exec(ao.text()))){aa=true}if(aa){ao.parent().css("display","none")}else{W+=parseInt(ao.next().text());ae++;T=!T;ao.parent().css("display","");if(T){ao.parent().addClass("odd");ao.parent().removeClass("even")}else{ao.parent().addClass("even");ao.parent().removeClass("odd")}}aa=false;ah++});if(R){if(ai){var Z,V,Y=$("#logTable table tbody");$.each(af,function(ao,ap){if(U[ao]<=1){return}V=Y.children("tr:nth-child("+(ap+1)+")");Z=V.children(":nth-child("+(runtime.logDataCols.length)+")");Z.text(U[ao]);if(S){V.children("td:nth-child(3)").text(z(ag[ao][0]));V.children("td:nth-child(4)").text(z(ag[ao][1]));V.children("td:nth-child(5)").text(ag[ao][2]);V.children("td:nth-child(6)").text(ag[ao][3])}})}$("#logTable table").trigger("update");setTimeout(function(){$("#logTable table").trigger("sorton",[[[runtime.logDataCols.length-1,1]]])},0)}$("#logTable table tfoot tr").html('<th colspan="'+(runtime.logDataCols.length-1)+'">'+PMA_messages.strSumRows+" "+ae+'<span style="float:right">'+PMA_messages.strTotal+'</span></th><th class="right">'+W+"</th>")}}function b(M){var L=M.split(":");return parseInt(L[0]*3600)+parseInt(L[1]*60)+parseInt(L[2])}function z(M){var L=Math.floor(M/3600);M-=L*3600;var N=Math.floor(M/60);M-=N*60;if(L<10){L="0"+L}if(N<10){N="0"+N}if(M<10){M="0"+M}return L+":"+N+":"+M}function g(P){var Y=P.rows;var T=[];var X=$('<table class="sortable"></table>');var U,R,L;$("#logTable").html(X);var Q=function(Z,aa){switch(Z){case"user_host":return aa.replace(/(\[.*?\])+/g,"")}return aa};for(var O=0,M=Y.length;O<M;O++){if(O==0){$.each(Y[0],function(Z,aa){T.push(Z)});X.append('<thead><tr><th class="nowrap">'+T.join('</th><th class="nowrap">')+"</th></tr></thead>");X.append(U=$("<tbody></tbody>"))}U.append(R=$('<tr class="noclick"></tr>'));var W="";for(var N=0,S=T.length;N<S;N++){if(N==T.length-2&&Y[O][T[N]].match(/^SELECT/i)){R.append(L=$('<td class="linkElem">'+Q(T[N],Y[O][T[N]])+"</td>"));L.click(q)}else{R.append("<td>"+Q(T[N],Y[O][T[N]])+"</td>")}R.data("query",Y[O])}}X.append('<tfoot><tr><th colspan="'+(T.length-1)+'">'+PMA_messages.strSumRows+" "+P.numRows+'<span style="float:right">'+PMA_messages.strTotal+'</span></th><th class="right">'+P.sum.TOTAL+"</th></tr></tfoot>");if($("#logTable th:last").html()=="#"){$("#logTable th:last").append("&nbsp;"+PMA_getImage("b_docs.png","",{"class":"qroupedQueryInfoIcon"}));var V=PMA_messages.strCountColumnExplanation;if(groupInserts){V+="<p>"+PMA_messages.strMoreCountColumnExplanation+"</p>"}PMA_tooltip($("img.qroupedQueryInfoIcon"),"img",V)}$("#logTable table").tablesorter({sortList:[[T.length-1,1]],widgets:["fast-zebra"]});$("#logTable table thead th").append('<img class="icon sortableIcon" src="themes/dot.gif" alt="">');return T}function q(){var N=$(this).parent().data("query");var M=N.argument||N.sql_text;if(codemirror_editor){M=PMA_SQLPrettyPrint(M);codemirror_editor.setValue(M);setTimeout(function(){codemirror_editor.refresh()},50)}else{$("#sqlquery").val(M)}var O=null;var L={};L[PMA_messages.strAnalyzeQuery]=function(){E(N)};L[PMA_messages.strClose]=function(){$(this).dialog("close")};$("#queryAnalyzerDialog").dialog({width:"auto",height:"auto",resizable:false,buttons:L,close:function(){if(O!=null){O.destroy()}$("#queryAnalyzerDialog div.placeHolder").html("");if(codemirror_editor){codemirror_editor.setValue("")}else{$("#sqlquery").val("")}}})}function E(M){var L=M.db||"";$("#queryAnalyzerDialog div.placeHolder").html(PMA_messages.strAnalyzing+' <img class="ajaxIcon" src="'+pmaThemeImage+'ajax_clock_small.gif" alt="">');$.post("server_status_monitor.php?"+PMA_commonParams.get("common_query"),{ajax_request:true,query_analyzer:true,query:codemirror_editor?codemirror_editor.getValue():$("#sqlquery").val(),database:L},function(T){if(T.success==true){T=T.message}else{$("#queryAnalyzerDialog div.placeHolder").html('<div class="error">'+T.error+"</div>");return}var N=0;$("#queryAnalyzerDialog div.placeHolder").html('<table width="100%" border="0"><tr><td class="explain"></td><td class="chart"></td></tr></table>');var V="<b>"+PMA_messages.strExplainOutput+"</b> "+$("#explain_docu").html();if(T.explain.length>1){V+=" (";for(var U=0;U<T.explain.length;U++){if(U>0){V+=", "}V+='<a href="#showExplain-'+U+'">'+U+"</a>"}V+=")"}V+="<p></p>";for(var U=0,O=T.explain.length;U<O;U++){V+='<div class="explain-'+U+'"'+(U>0?'style="display:none;"':"")+">";$.each(T.explain[U],function(W,X){X=(X==null)?"null":X;if(W=="type"&&X.toLowerCase()=="all"){X='<span class="attention">'+X+"</span>"}if(W=="Extra"){X=X.replace(/(using (temporary|filesort))/gi,'<span class="attention">$1</span>')}V+=W+": "+X+"<br />"});V+="</div>"}V+="<p><b>"+PMA_messages.strAffectedRows+"</b> "+T.affectedRows;$("#queryAnalyzerDialog div.placeHolder td.explain").append(V);$('#queryAnalyzerDialog div.placeHolder a[href*="#showExplain"]').click(function(){var W=$(this).attr("href").split("-")[1];$(this).parent().find('div[class*="explain"]').hide();$(this).parent().find('div[class*="explain-'+W+'"]').show()});if(T.profiling){var S=[];var R='<table class="queryNums"><thead><tr><th>'+PMA_messages.strStatus+"</th><th>"+PMA_messages.strTime+"</th></tr></thead><tbody>";var P;var Q=0;for(var U=0,O=T.profiling.length;U<O;U++){P=parseFloat(T.profiling[U].duration);N+=P;R+="<tr><td>"+T.profiling[U].state+" </td><td> "+PMA_prettyProfilingNum(P,2)+"</td></tr>"}for(var U=0,O=T.profiling.length;U<O;U++){P=parseFloat(T.profiling[U].duration);if(P/N>0.02){S.push([PMA_prettyProfilingNum(P,2)+" "+T.profiling[U].state,P])}else{Q+=P}}if(Q>0){S.push([PMA_prettyProfilingNum(Q,2)+" "+PMA_messages.strOther,Q])}R+="<tr><td><b>"+PMA_messages.strTotalTime+"</b></td><td>"+PMA_prettyProfilingNum(N,2)+"</td></tr>";R+="</tbody></table>";$("#queryAnalyzerDialog div.placeHolder td.chart").append("<b>"+PMA_messages.strProfilingResults+" "+$("#profiling_docu").html()+'</b> (<a href="#showNums">'+PMA_messages.strTable+'</a>, <a href="#showChart">'+PMA_messages.strChart+"</a>)<br/>"+R+' <div id="queryProfiling"></div>');$('#queryAnalyzerDialog div.placeHolder a[href="#showNums"]').click(function(){$("#queryAnalyzerDialog #queryProfiling").hide();$("#queryAnalyzerDialog table.queryNums").show();return false});$('#queryAnalyzerDialog div.placeHolder a[href="#showChart"]').click(function(){$("#queryAnalyzerDialog #queryProfiling").show();$("#queryAnalyzerDialog table.queryNums").hide();return false});profilingChart=PMA_createProfilingChartJqplot("queryProfiling",S)}})}function e(){var L={};$.each(runtime.charts,function(M,N){L[M]={};L[M].nodes=N.nodes;L[M].settings=N.settings;L[M].title=N.title;L[M].series=N.series;L[M].maxYLabel=N.maxYLabel});if(window.localStorage){window.localStorage.monitorCharts=$.toJSON(L);window.localStorage.monitorSettings=$.toJSON(a);window.localStorage.monitorVersion=k}$('a[href="#clearMonitorConfig"]').show()}});AJAX.registerOnload("server_status_monitor.js",function(){$('a[href="#pauseCharts"]').trigger("click")});function serverResponseError(){var a={};a[PMA_messages.strReloadPage]=function(){window.location.reload()};$("#emptyDialog").dialog({title:PMA_messages.strRefreshFailed});$("#emptyDialog").html(PMA_getImage("s_attention.png")+PMA_messages.strInvalidResponseExplanation);$("#emptyDialog").dialog({buttons:a})}function destroyGrid(){if(runtime.charts){$.each(runtime.charts,function(b,d){try{d.chart.destroy()}catch(c){}})}try{runtime.refreshRequest.abort()}catch(a){}try{clearTimeout(runtime.refreshTimeout)}catch(a){}$("#chartGrid").html("");runtime.charts=null;runtime.chartAI=0;monitorSettings=null};